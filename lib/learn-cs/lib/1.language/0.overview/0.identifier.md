---
title: 标识符
slug: /overview/identifier
---

## 编译原理
标识符属于语法规则中单词符号规则的一种。
```
基本字 void int float
标识符 fun x y z
整常数 50
运算符 * + - / % = &
界限符 () {} , ;
```

使用有限自动机描述规则。

标识符是一个字符串，这个字符串通常有一定的限定规则，
正则为`[A-Za-z_]+[\w_]*`。  
首字符包含字母和下划线，其他为数字和字母以及下划线，
Java中首字符可以为`$`。

## 编译原理
编译器词法分析阶段，会扫描源代码，获取哪些属于标识符，哪些属于数字。限定标识符规则，
就是为了更容易区分标识符和其他部分。
```
基本字 void int float
标识符 fun x y z
整常数 50
运算符 * + - / % = &
界限符 () {} , ;
```

标识符被编译器识别后，会加入到符号表中。


## 符号表

符号表有多张，变量表或者常数表之类的。


变量表也叫名字表namtab，类似数据库表格，存储代码中用到的变量的所有名字和他的相关信息。
例如，name：也就是名字，kind：常量/变量/类型/过程（函数）
lev：名字所处层次 typ：整数/字符/数组/函数等
normal：是否为形参用于决定怎么传参数
ref：当变量为数组类型，指向数组信息表中的位置。当为过程名，指向在过程表中的位置。
adr/val/size：共享同一个存储单元，根据类型代表不同意义。如果为变量，这里就存地址，函数就存函数入口地址。常量就存常量值，如果为类型就存入需要的size。
link：指向上一个同层次名字。（函数体内第一个参数就是0，只计算同一层次的。）

函数/程序体表btab：记录程序题信息也类似表格。管理名字表
lastpar：最后一个形参在变量表中的位置。用来找到所有形式参数。
last：本程序中最后一个变量的位置，用来找到所有变量。
psize：所有形参需要空间
vsize：所有局部数据所需空间

层次表display：管理函数表
存储当前代码层次所对应的函数表的范围。
根据{}来确定层次。最外层为1，每进入一个局部代码块就+1.

数组信息表：
inxtyp：下标类型
eltyp：元素类型
elref：多维数组时，指向元素数组下标。
low：数组下限
high：数组上线
elsize：单个元素size
size：整个数组size

中间代码表：
opcode：操作码
i：操作数的层数
a：操作数的相对地址，多个操作数通过指令配合。


作用域分析：
display表和btab表以及nametab表是层次关系，分别是一层二层三层。
变量通过这些表之间的关系，确定自己是在第几层。
所以，作用域是编译器通过遍历display表，然后查找对应的btab和namtab确定的。所以层次越高的能屏蔽层次低的。

包含常量名 变量名 函数名等
符号表每项包含名字和信息两大部分。

符号表用于存储用户定义的标识符。

词法分析器扫描源代码，一个一个字符扫描。发现是字符串并且不是基本字，就会将其插入符号表。并把地址按二元组（‘标识符的种别码（类似ASCII表）’，指针）

## 常数表

同理，常数会插入常数表，一般为整常数表。和符号表一样，返回（‘常数的种别码（类似ASCII表）’，指针）。